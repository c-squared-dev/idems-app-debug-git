# Create a PR for new content branches
# https://cli.github.com/manual/gh_pr_create

# SETUP
# See https://github.com/marketplace/actions/create-pull-request#workflow-permissions

name: PR - Create
on:
  push:
    branches:
      - content/*
jobs:
  pr_create:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - run: gh pr create --base main --head '${{github.ref_name}}'' --title 'Merge ${{github.ref_name}}' --body 'Created by Github action'
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      # - name: Reset promotion branch
      #   run: |
      #     git fetch origin ${{github.ref_name}}:${{github.ref_name}}
      #     git reset --hard ${{github.ref_name}}
      # - name: Create Pull Request
      #   id: cpr
      #   uses: peter-evans/create-pull-request@v5
      #   with:
      #     title: ${{github.ref_name}}
      #     branch: main
      # - name: Check outputs
      #   if: ${{ steps.cpr.outputs.pull-request-number }}
      #   run: |
      #     echo "Pull Request Number - ${{ steps.cpr.outputs.pull-request-number }}"
      #     echo "Pull Request URL - ${{ steps.cpr.outputs.pull-request-url }}"
